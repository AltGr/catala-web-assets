<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Message (catala.Catala_utils.Message)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">catala</a> &#x00BB; <a href="../index.html">Catala_utils</a> &#x00BB; Message</nav><header class="odoc-preamble"><h1>Module <code><span>Catala_utils.Message</span></code></h1><p>Interface for emitting compiler messages.</p><p>All messages are expected to use the <code>Format</code> module. Flush, <code>&quot;@?&quot;</code>, <code>&quot;@.&quot;</code>, <code>&quot;%!&quot;</code> etc. are not supposed to be used outside of this module.</p><p>WARNING: this module performs side-effects at load time, adding support for ocolor tags (e.g. <code>&quot;@{&lt;blue&gt;text@}&quot;</code>) to the standard string formatter used by e.g. <code>Format.sprintf</code>. (In this case, the tags are ignored, for color output you should use the functions of this module that toggle support depending on cli flags and terminal support).</p></header><nav class="odoc-toc"><ul><li><a href="#message-content">Message content</a></li><li><a href="#error-exception">Error exception</a></li><li><a href="#common-error-raising">Common error raising</a></li><li><a href="#common-warning-emission">Common warning emission</a></li><li><a href="#common-log-emission">Common log emission</a></li><li><a href="#common-debug-emission">Common debug emission</a></li><li><a href="#common-result-emission">Common result emission</a></li><li><a href="#some-formatting-helpers">Some formatting helpers</a></li></ul></nav><div class="odoc-content"><h2 id="message-content"><a href="#message-content" class="anchor"></a>Message content</h2><div class="odoc-spec"><div class="spec type" id="type-content_type" class="anchored"><a href="#type-content_type" class="anchor"></a><code><span><span class="keyword">type</span> content_type</span><span> = </span></code><table><tr id="type-content_type.Error" class="anchored"><td class="def variant constructor"><a href="#type-content_type.Error" class="anchor"></a><code><span>| </span><span><span class="constructor">Error</span></span></code></td></tr><tr id="type-content_type.Warning" class="anchored"><td class="def variant constructor"><a href="#type-content_type.Warning" class="anchor"></a><code><span>| </span><span><span class="constructor">Warning</span></span></code></td></tr><tr id="type-content_type.Debug" class="anchored"><td class="def variant constructor"><a href="#type-content_type.Debug" class="anchor"></a><code><span>| </span><span><span class="constructor">Debug</span></span></code></td></tr><tr id="type-content_type.Log" class="anchored"><td class="def variant constructor"><a href="#type-content_type.Log" class="anchor"></a><code><span>| </span><span><span class="constructor">Log</span></span></code></td></tr><tr id="type-content_type.Result" class="anchored"><td class="def variant constructor"><a href="#type-content_type.Result" class="anchor"></a><code><span>| </span><span><span class="constructor">Result</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec module" id="module-Content" class="anchored"><a href="#module-Content" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Content/index.html">Content</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><p>This functions emits the message according to the emission type defined by <code>Cli.message_format_flag</code>.</p><h2 id="error-exception"><a href="#error-exception" class="anchor"></a>Error exception</h2><div class="odoc-spec"><div class="spec exception" id="exception-CompilerError" class="anchored"><a href="#exception-CompilerError" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">CompilerError</span> <span class="keyword">of</span> <a href="Content/index.html#type-t">Content.t</a></span></code></div></div><h2 id="common-error-raising"><a href="#common-error-raising" class="anchor"></a>Common error raising</h2><div class="odoc-spec"><div class="spec value" id="val-raise_spanned_error" class="anchored"><a href="#val-raise_spanned_error" class="anchor"></a><code><span><span class="keyword">val</span> raise_spanned_error : 
  <span>?span_msg:<a href="Content/index.html#type-message">Content.message</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?suggestion:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Pos/index.html#type-t">Pos.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'a</span>, <span class="xref-unresolved">Stdlib</span>.Format.formatter, unit, <span class="type-var">'b</span> )</span> <span class="xref-unresolved">Stdlib</span>.format4</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-raise_multispanned_error_full" class="anchored"><a href="#val-raise_multispanned_error_full" class="anchor"></a><code><span><span class="keyword">val</span> raise_multispanned_error_full : 
  <span>?suggestion:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span><a href="Content/index.html#type-message">Content.message</a> option</span> * <a href="../Pos/index.html#type-t">Pos.t</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'a</span>, <span class="xref-unresolved">Stdlib</span>.Format.formatter, unit, <span class="type-var">'b</span> )</span> <span class="xref-unresolved">Stdlib</span>.format4</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-raise_multispanned_error" class="anchored"><a href="#val-raise_multispanned_error" class="anchor"></a><code><span><span class="keyword">val</span> raise_multispanned_error : 
  <span>?suggestion:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span>string option</span> * <a href="../Pos/index.html#type-t">Pos.t</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'a</span>, <span class="xref-unresolved">Stdlib</span>.Format.formatter, unit, <span class="type-var">'b</span> )</span> <span class="xref-unresolved">Stdlib</span>.format4</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-raise_error" class="anchored"><a href="#val-raise_error" class="anchor"></a><code><span><span class="keyword">val</span> raise_error : 
  <span><span><span>( <span class="type-var">'a</span>, <span class="xref-unresolved">Stdlib</span>.Format.formatter, unit, <span class="type-var">'b</span> )</span> <span class="xref-unresolved">Stdlib</span>.format4</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-raise_internal_error" class="anchored"><a href="#val-raise_internal_error" class="anchor"></a><code><span><span class="keyword">val</span> raise_internal_error : 
  <span><span><span>( <span class="type-var">'a</span>, <span class="xref-unresolved">Stdlib</span>.Format.formatter, unit, <span class="type-var">'b</span> )</span> <span class="xref-unresolved">Stdlib</span>.format4</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-assert_internal_error" class="anchored"><a href="#val-assert_internal_error" class="anchor"></a><code><span><span class="keyword">val</span> assert_internal_error : 
  <span>bool <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'a</span>, <span class="xref-unresolved">Stdlib</span>.Format.formatter, unit, unit, unit, unit )</span> <span class="xref-unresolved">Stdlib</span>.format6</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div></div><h2 id="common-warning-emission"><a href="#common-warning-emission" class="anchor"></a>Common warning emission</h2><div class="odoc-spec"><div class="spec value" id="val-emit_multispanned_warning" class="anchored"><a href="#val-emit_multispanned_warning" class="anchor"></a><code><span><span class="keyword">val</span> emit_multispanned_warning : 
  <span><span><span>(<span><a href="Content/index.html#type-message">Content.message</a> option</span> * <a href="../Pos/index.html#type-t">Pos.t</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'a</span>, <span class="xref-unresolved">Stdlib</span>.Format.formatter, unit )</span> <span class="xref-unresolved">Stdlib</span>.format</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-emit_spanned_warning" class="anchored"><a href="#val-emit_spanned_warning" class="anchor"></a><code><span><span class="keyword">val</span> emit_spanned_warning : 
  <span>?span_msg:<a href="Content/index.html#type-message">Content.message</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Pos/index.html#type-t">Pos.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'a</span>, <span class="xref-unresolved">Stdlib</span>.Format.formatter, unit )</span> <span class="xref-unresolved">Stdlib</span>.format</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-emit_warning" class="anchored"><a href="#val-emit_warning" class="anchor"></a><code><span><span class="keyword">val</span> emit_warning : <span><span><span>( <span class="type-var">'a</span>, <span class="xref-unresolved">Stdlib</span>.Format.formatter, unit )</span> <span class="xref-unresolved">Stdlib</span>.format</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><h2 id="common-log-emission"><a href="#common-log-emission" class="anchor"></a>Common log emission</h2><div class="odoc-spec"><div class="spec value" id="val-emit_log" class="anchored"><a href="#val-emit_log" class="anchor"></a><code><span><span class="keyword">val</span> emit_log : <span><span><span>( <span class="type-var">'a</span>, <span class="xref-unresolved">Stdlib</span>.Format.formatter, unit )</span> <span class="xref-unresolved">Stdlib</span>.format</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><h2 id="common-debug-emission"><a href="#common-debug-emission" class="anchor"></a>Common debug emission</h2><div class="odoc-spec"><div class="spec value" id="val-emit_debug" class="anchored"><a href="#val-emit_debug" class="anchor"></a><code><span><span class="keyword">val</span> emit_debug : <span><span><span>( <span class="type-var">'a</span>, <span class="xref-unresolved">Stdlib</span>.Format.formatter, unit )</span> <span class="xref-unresolved">Stdlib</span>.format</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><h2 id="common-result-emission"><a href="#common-result-emission" class="anchor"></a>Common result emission</h2><div class="odoc-spec"><div class="spec value" id="val-emit_result" class="anchored"><a href="#val-emit_result" class="anchor"></a><code><span><span class="keyword">val</span> emit_result : <span><span><span>( <span class="type-var">'a</span>, <span class="xref-unresolved">Stdlib</span>.Format.formatter, unit )</span> <span class="xref-unresolved">Stdlib</span>.format</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><h2 id="some-formatting-helpers"><a href="#some-formatting-helpers" class="anchor"></a>Some formatting helpers</h2><div class="odoc-spec"><div class="spec value" id="val-unformat" class="anchored"><a href="#val-unformat" class="anchor"></a><code><span><span class="keyword">val</span> unformat : <span><span>( <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> unit )</span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Converts <code>f</code> to a string, discarding formatting and skipping newlines and indents</p></div></div><div class="odoc-spec"><div class="spec value" id="val-formatter_of_out_channel" class="anchored"><a href="#val-formatter_of_out_channel" class="anchor"></a><code><span><span class="keyword">val</span> formatter_of_out_channel : <span><span class="xref-unresolved">Stdlib</span>.out_channel <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Stdlib</span>.Format.formatter</span></code></div><div class="spec-doc"><p>Creates a new formatter from the given out channel, with correct handling of the ocolor tags. Actual use of escape codes in the output depends on <code>Cli.style_flag</code> -- and wether the channel is a tty if that is set to auto.</p></div></div></div></body></html>